---
title: "Example 1"
format:
    html:
        toc: true
        number-sections: true
        theme: cosmo
---

Nous souhaitons dessiner l'image suivante en utilisant le package `tikz` :

![](image.jpg)

On commence par créer un fichier `standalone` avec le contenu suivant :

```latex
\documentclass{standalone}
\begin{document}
...
\end{document}
```

A l'intérieur du document, on charge le package `tikz` et on crée une figure en utilisant l'environnement `tikzpicture` :

```latex
\documentclass{standalone}

% Chargement du package tikz
\usepackage{tikz}

\begin{document}
\begin{tikzpicture}
% Dessin ici
\end{tikzpicture}
\end{document}
```

# Version simple

On commence par dessiner un axe horizontal avec une flèche à son extrémité droite :

```latex
\draw[->, thick] (-0.5,0) -- (10.5,0);
```

Cette commande dessine une ligne épaisse avec une flèche allant du point `(-0.5,0)` au point `(10.5,0)`. Le choix des coordonnées permet de laisser un peu d'espace avant le début de l'axe et après la fin de l'axe. La flèche est placée en utilisant l'option `->`. L'option `thick` rend la ligne plus épaisse.

```{r}
#| echo: false
#| engine: tikz
\draw[->, thick] (-0.5, 0) -- (10.5, 0);
```

Ensuite on peut ajouter des étiquettes sur l'axe en utilisant des segments verticaux et des nœuds pour les numéros :

```latex
\draw[-] (0, 0.2) -- (0, -0.2) node[below] {0};
\draw[-] (1, 0.2) -- (1, -0.2) node[below] {1};
\draw[-] (2, 0.2) -- (2, -0.2) node[below] {2};
\draw[-] (3, 0.2) -- (3, -0.2) node[below] {3};
\draw[-] (4, 0.2) -- (4, -0.2) node[below] {4};
\draw[-] (5, 0.2) -- (5, -0.2) node[below] {5};
\draw[-] (6, 0.2) -- (6, -0.2) node[below] {6};
\draw[-] (7, 0.2) -- (7, -0.2) node[below] {7};
\draw[-] (8, 0.2) -- (8, -0.2) node[below] {8};
\draw[-] (9, 0.2) -- (9, -0.2) node[below] {9};
\draw[-] (10, 0.2) -- (10, -0.2) node[below] {10};
```

On peut ensuite ajouter le rectangle bleu au-dessus de l'axe qui contient le text "Il était une fois" :

```latex
\node[
    rectangle,
    draw,
    fill=blue!20,
    rounded corners,
    minimum height=0.8cm,
    text width=3cm,
    align=center
] (fois) at (0.5, 2.5) {Il était une fois};
```

On peut ajouter les autres rectangles de la même manière :

```latex
\node[
    rectangle,
    draw,
    fill=blue!20,
    rounded corners,
    minimum height=0.8cm,
    text width=3cm,
    align=center
] (reine) at (2.25, -2) {une reine};

\node[
    rectangle,
    draw,
    fill=blue!20,
    rounded corners,
    minimum height=0.8cm,
    text width=3cm,
    align=center
] (roi) at (5.5, 2.5) {un roi};

\node[
    rectangle,
    draw,
    fill=red!20,
    rounded corners,
    minimum height=0.8cm,
    text width=3cm,
    align=center
] (fin) at (8.25, -2) {happy end};
```

Enfin, on peut ajouter les flèches entre qui relient les rectangles avec l'axe :

```latex
\draw[->, thick] (fois.south) -- (1, 0.2);
\draw[->, thick] (roi.south) -- (6, 0.2);
\draw[->, thick] (reine.north) -- (3, -0.2);
\draw[->, thick] (fin.north) -- (9, -0.2);
```

Voici le code complet pour obtenir l'image souhaitée :

```latex
\documentclass{standalone}
\usepackage{tikz}

\begin{document}
\begin{tikzpicture}
    \draw[->, thick] (-0.5, 0) -- (10.5, 0);
    \draw[-] (0, 0.2) -- (0, -0.2) node[below] {0};
    \draw[-] (1, 0.2) -- (1, -0.2) node[below] {1};
    \draw[-] (2, 0.2) -- (2, -0.2) node[below] {2};
    \draw[-] (3, 0.2) -- (3, -0.2) node[below] {3};
    \draw[-] (4, 0.2) -- (4, -0.2) node[below] {4};
    \draw[-] (5, 0.2) -- (5, -0.2) node[below] {5};
    \draw[-] (6, 0.2) -- (6, -0.2) node[below] {6};
    \draw[-] (7, 0.2) -- (7, -0.2) node[below] {7};
    \draw[-] (8, 0.2) -- (8, -0.2) node[below] {8};
    \draw[-] (9, 0.2) -- (9, -0.2) node[below] {9};
    \draw[-] (10, 0.2) -- (10, -0.2) node[below] {10};


    \node[
        rectangle,
        draw,
        fill=blue!20,
        rounded corners,
        minimum height=0.8cm,
        text width=3cm,
        align=center
    ] (fois) at (0.5, 2.5) {Il était une fois};

    \node[
        rectangle,
        draw,
        fill=blue!20,
        rounded corners,
        minimum height=0.8cm,
        text width=3cm,
        align=center
    ] (reine) at (2.25, -2) {une reine};

    \node[
        rectangle,
        draw,
        fill=blue!20,
        rounded corners,
        minimum height=0.8cm,
        text width=3cm,
        align=center
    ] (roi) at (5.5, 2.5) {un roi};

    \node[
        rectangle,
        draw,
        fill=red!20,
        rounded corners,
        minimum height=0.8cm,
        text width=3cm,
        align=center
    ] (fin) at (8.25, -2) {happy end};

    \draw[->, thick] (fois.south) -- (1, 0.2);
    \draw[->, thick] (roi.south) -- (6, 0.2);
    \draw[->, thick] (reine.north) -- (3, -0.2);
    \draw[->, thick] (fin.north) -- (9, -0.2);

\end{tikzpicture}
\end{document}
```

# Version avancée

Le code précédent fonctionne bien, mais il peut être amélioré en utilisant des boucles pour dessiner les étiquettes de l'axe et en définissant des styles pour les nœuds afin de rendre le code plus lisible et plus facile à modifier.

1. Utilisation d'une boucle pour les étiquettes de l'axe :

```latex
\foreach \x in {0,1,...,10} {
    \draw[-] (\x, 0.2) -- (\x, -0.2) node[below] {\x};
}
```

2. Définition de styles pour les nœuds :

```latex
\tikzset{
    genericbox/.style={
        rectangle,
        draw,
        rounded corners,
        minimum height=0.8cm,
        text width=3cm,
        align=center
    },
    bluebox/.style={
        genericbox,
        fill=blue!20
    },
    redbox/.style={
        genericbox,
        fill=red!20
    }
}
```
3. Amélioration du positionnement des flèches:

```latex
\node[inner sep=0.2cm] (foisinstant) at (1, 0) {};
\node[inner sep=0.6cm] (reineinstant) at (3, 0) {};
\node[inner sep=0.2cm] (roinstant) at (6, 0) {};
\node[inner sep=0.6cm] (fininstant) at (9, 0) {};
```

Voici le code complet amélioré :

```latex
\documentclass{standalone}
\usepackage{tikz}

\tikzset{
    box/.style={
        rectangle,
        draw,
        fill=gray!20,
        rounded corners,
        minimum height=0.8cm,
        text width=3cm,
        align=center
    },
    bluebox/.style={
        box,
        fill=blue!20
    },
    redbox/.style={
        box,
        fill=red!20
    }
}

\begin{document}
\begin{tikzpicture}
    \draw[->, thick] (-0.5, 0) -- (10.5, 0);
    \foreach \x in {0,1,...,10} {
        \draw[-] (\x, 0.2) -- (\x, -0.2) node[below] {\x};
    }

    \node[bluebox] (fois) at (0.5, 2.5) {Il était une fois};
    \node[bluebox] (reine) at (2.25, -2) {une reine};
    \node[bluebox] (roi) at (5.5, 2.5) {un roi};
    \node[redbox] (fin) at (8.25, -2) {happy end};

    \node[inner sep=0.2cm] (foisinstant) at (1, 0) {};
    \node[inner sep=0.6cm] (reineinstant) at (3, 0) {};
    \node[inner sep=0.2cm] (roinstant) at (6, 0) {};
    \node[inner sep=0.6cm] (fininstant) at (9, 0) {};

    \draw[->, thick] (fois.south) -- (foisinstant.north);
    \draw[->, thick] (roi.south) -- (roinstant.north);
    \draw[->, thick] (reine.north) -- (reineinstant.south);
    \draw[->, thick] (fin.north) -- (fininstant.south);

\end{tikzpicture}
\end{document}
```